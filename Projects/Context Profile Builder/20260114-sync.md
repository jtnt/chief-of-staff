# Context Profile Builder: Sync from Source

**Date:** 2026-01-14 06:15 PM EST
**Source:** `/Users/jtnt/Documents/Projects/context-profile-builder`

## Recent Git Activity

```
867baf8 Add opinionated workflow with sequential document locking
9354640 Add project documentation
a2f8ac4 Add Context Profile Builder MVP
f3a2295 Initial commit from Create Next App
```

## Current State

MVP functional with opinionated workflow now implemented:
- User signs up, verifies email, logs in
- Creates organization with company name and website
- Website analyzed via Jina Reader + Claude (with status polling)
- Company Background questionnaire with AI generation
- Sequential document locking (Company Background → ICP → Competitor → Brand Voice)
- Auto-save on generate (inputs AND generated content)
- Tab-specific UI (save buttons on Preview, generate on Questionnaire)

**Tech stack:** Next.js 16, TypeScript, Supabase, shadcn/ui, Claude API, Jina Reader

## Recent Work

**Opinionated Software Implementation (2026-01-14):**
- Phase 1: Sequential Workflow
  - Created `src/lib/document-config.ts` with document types and dependencies
  - Documents lock until prerequisites complete (enforced in dashboard and document page)

- Phase 2: Quick Fixes from user testing
  - Download filename now includes company name (`{company}-{doctype}.md`)
  - Save Draft stays on page (shows "Draft saved" indicator)
  - Generate auto-saves questionnaire inputs as draft
  - Dashboard polls for research status every 5s, refreshes when complete

- Phase 3: Bug Fixes from testing
  - Auto-save generated content after generation (no data loss on back navigation)
  - Default to Preview tab if document has content
  - Tab-specific buttons (save only on Preview, generate only on Questionnaire)
  - Renamed "Save as Complete" to "Save & Continue"

## Open Items

**Next to build:**
- Progress steps UI during generation (structured response approach)
- ICP Definition questionnaire
- Competitor Intelligence questionnaire
- Brand Voice questionnaire

**Deferred:**
- Onboarding flow improvements (verify → login redirect, skip dashboard on first signup)
- Signup simplification (just company name + URL)
- AI safety controls (rate limiting, prompt injection guards)
- Enhanced company research (news, LinkedIn via Apify)
- Ontological layer / front matter

**Technical Debt:**
- Re-enable RLS with correct policies
- Generate proper Supabase types
- Fix Next.js warnings (middleware deprecation, multiple lockfiles)
